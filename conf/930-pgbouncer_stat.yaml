
#┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#┃ pgbouncer_stat
#┃ pgbouncer stats per database: http://www.pgbouncer.org/usage.html#show-stats
#┣┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈
#┃ pgbouncer_stat_total_xact_count{datname}   GAUGE    total transaction count
#┃ pgbouncer_stat_total_query_count{datname}  GAUGE    relation name of this relation
#┃ pgbouncer_stat_total_received{datname}     COUNTER  how many times this function has been called
#┃ pgbouncer_stat_total_sent{datname}         COUNTER  how much time spent in this function and it's child function, in ms
#┃ pgbouncer_stat_total_xact_time{datname}    COUNTER  how much time spent in this function itself (other func not included), in ms
#┃ pgbouncer_stat_total_query_time{datname}   COUNTER  how many times this function has been called
#┃ pgbouncer_stat_total_wait_time{datname}    COUNTER  how much time spent in this function and it's child function, in ms
#┃ pgbouncer_stat_avg_xact_count{datname}     GAUGE    how much time spent in this function itself (other func not included), in ms
#┃ pgbouncer_stat_avg_query_count{datname}    GAUGE    how many times this function has been called
#┃ pgbouncer_stat_avg_recv{datname}           GAUGE    how much time spent in this function and it's child function, in ms
#┃ pgbouncer_stat_avg_sent{datname}           GAUGE    how much time spent in this function itself (other func not included), in ms
#┃ pgbouncer_stat_avg_xact_time{datname}      GAUGE    how many times this function has been called
#┃ pgbouncer_stat_avg_query_time{datname}     GAUGE    how much time spent in this function and it's child function, in ms
#┃ pgbouncer_stat_avg_wait_time{datname}      GAUGE    how much time spent in this function itself (other func not included), in ms
#┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
pgbouncer_stat:
  name: pgbouncer_stat
  desc: "pgbouncer stats per database: http://www.pgbouncer.org/usage.html#show-stats"

  query: |
    SHOW STATS;

  ttl: 10
  min_version: 10800
  tags:
    - pgbouncer

  metrics:
    - database:
        usage: LABEL
        rename: datname
        description: database name of this relation
    - total_xact_count:
        usage: GAUGE
        description: total transaction count
    - total_query_count:
        usage: GAUGE
        description: relation name of this relation
    - total_received:
        usage: COUNTER
        description: how many times this function has been called
    - total_sent:
        usage: COUNTER
        description: how much time spent in this function and it's child function, in ms
    - total_xact_time:
        usage: COUNTER
        description: how much time spent in this function itself (other func not included), in ms
    - total_query_time:
        usage: COUNTER
        description: how many times this function has been called
    - total_wait_time:
        usage: COUNTER
        description: how much time spent in this function and it's child function, in ms
    - avg_xact_count:
        usage: GAUGE
        description: how much time spent in this function itself (other func not included), in ms
    - avg_query_count:
        usage: GAUGE
        description: how many times this function has been called
    - avg_recv:
        usage: GAUGE
        description: how much time spent in this function and it's child function, in ms
    - avg_sent:
        usage: GAUGE
        description: how much time spent in this function itself (other func not included), in ms
    - avg_xact_time:
        usage: GAUGE
        description: how many times this function has been called
    - avg_query_time:
        usage: GAUGE
        description: how much time spent in this function and it's child function, in ms
    - avg_wait_time:
        usage: GAUGE
        description: how much time spent in this function itself (other func not included), in ms

